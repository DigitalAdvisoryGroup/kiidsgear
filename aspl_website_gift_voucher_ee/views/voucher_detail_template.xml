<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <data>

        <template id="aspl_website_link" inherit_id="website.layout">
            <xpath expr="//header//ul[@id='top_menu']/li" position="before">
                <t t-set="voucher_enable"
                   t-value="request.env['ir.config_parameter'].sudo().get_param('aspl_website_gift_voucher_ee.gift_voucher')"/>
                <li class="nav-item" t-if="voucher_enable == 'True'">
                    <a role="menuitem" href="/voucher" class="nav-link ">
                        <span>Voucher</span>
                    </a>
                </li>
            </xpath>
        </template>
    </data>

Hello Sir
1) Need to pay multiple invoice from website with payment gateway-> 4 days

Cybersource   below point  =>  8 to 10 days

1) Need to   Send Tax amount -
2) Authorization (with the MDDS configured it has to raise the Decision Manager) -> Need to pass merchant defined fields

Need cybersource response

1) Capture (for the transaction liquidation)
2) Void (this is the cancellation of the authorization if it is in pending state)
3) Credit (this is the return after the transaction has been transmitted.) Reversal
    <template id="voucher_detail_template" name="User Detail">
        <t t-call="website.layout">
            <div class="voucher-header-top">
                <span>Gift Vouchers</span>
            </div>
            <div class="raw clearfix">
                <t t-foreach="voucher_data" t-as="voucher">
                    <t t-if="voucher.expiry_date >= datetime.datetime.now().date()">
                        <div class="col-md-6 voucher_clear" style="float:left;">
                            <div class="card">
                                <div class="voucher-content">

                                    <div class="voucher-left-wrapper">

                                        <img t-att-src="'data:image/png;base64,%s' % to_text(voucher.voucher_image)"
                                             style="width:100%"/>
                                    </div>

                                    <div class="voucher-right-wrapper">
                                        <div class="voucher-right">
                                            <div class="voucher-right-content">
                                                <h3 class="voucher title">
                                                    <t t-if="voucher.voucher_type == 'category'">
                                                        <t t-set="category_name" t-vlaue=""/>
                                                        <t t-foreach="voucher.category_type" t-as="category">
                                                            <span>
                                                                <t t-set="category_name"
                                                                   t-value="category_name +',  '+ category.name"/>
                                                            </span>
                                                        </t>

                                                        <t t-if="voucher.discount_type == 'fixed'">
                                                            <span>Flat
                                                                <b>Rs.
                                                                    <t t-esc="voucher.discount"/>
                                                                </b>
                                                                off on
                                                                <b>
                                                                    <t t-esc="category_name"/>
                                                                </b>
                                                                Products.
                                                            </span>
                                                        </t>

                                                        <t t-if="voucher.discount_type == 'percentage'">
                                                            <span>Flat
                                                                <b>
                                                                    <t t-esc="voucher.discount"/>
                                                                    %
                                                                </b>
                                                                off on
                                                                <b>
                                                                    <t t-esc="category_name"/>
                                                                </b>
                                                                Products.
                                                            </span>
                                                        </t>
                                                    </t>

                                                    <t t-if="voucher.voucher_type == 'order_total'">
                                                        <t t-if="voucher.discount_type == 'fixed'">
                                                            <span>Flat
                                                                <b>
                                                                    <t t-esc="voucher.discount"/>
                                                                    Rs.
                                                                </b>
                                                                off on Total order Of
                                                                <b>
                                                                    <t t-esc="voucher.minimum_amount"/>
                                                                    Rs.
                                                                </b>
                                                            </span>
                                                        </t>

                                                        <t t-if="voucher.discount_type == 'percentage'">
                                                            <span>Flat
                                                                <b>
                                                                    <t t-esc="voucher.discount"/>
                                                                    %
                                                                </b>
                                                                off on Total order Of
                                                                <b>
                                                                    <t t-esc="voucher.minimum_amount"/>
                                                                    Rs.
                                                                </b>
                                                            </span>
                                                        </t>
                                                    </t>
                                                </h3>
                                                <p class="expiry-class">
                                                    <b>Ends on:-</b>
                                                    <span t-esc="voucher.expiry_date"/>
                                                </p>

                                                <t t-if="voucher.description">
                                                    <div>
                                                        <p class="view-detail">
                                                            <a data-toggle="collapse"
                                                               t-attf-data-target="#viewdetails_#{voucher.id}">View
                                                                Details
                                                            </a>
                                                        </p>
                                                    </div>
                                                </t>
                                            </div>

                                            <div class="bottom">
                                                <span class="see-the-offer">
                                                    <span>View Coupon Code</span>
                                                    <span class="corner"></span>
                                                </span>

                                                <span class="see-the-offer-active">
                                                    <span class="code-detail">
                                                        <t t-esc="voucher.code"/>
                                                    </span>
                                                    <span class="copy-btn">COPY</span>
                                                </span>
                                            </div>
                                        </div>
                                    </div>

                                </div>

                                <div class="voucher-description">
                                    <p class="collapse" t-att-id="'viewdetails_%s' % voucher.id">
                                        <t t-esc="voucher.description"/>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </t>
                </t>
            </div>
        </t>
    </template>


    <template id="assets_frontend_website_custom" inherit_id="web.assets_frontend">
        <xpath expr="." position="inside">
            <script src="/aspl_website_gift_voucher_ee/static/src/js/main.js"/>
            <script src="/aspl_website_gift_voucher_ee/static/src/js/sweetalert.min.js"/>
            <script src="/aspl_website_gift_voucher_ee/static/src/js/vouchernotification.js"/>
            <script src="/aspl_website_gift_voucher_ee/static/src/js/bootstrap-notify.js"/>
            <script src="/aspl_website_gift_voucher_ee/static/src/js/voucherpage.js"/>
            <link rel="stylesheet" href="/aspl_website_gift_voucher_ee/static/src/css/template.css"/>
            <link rel="stylesheet" href="/aspl_website_gift_voucher_ee/static/src/css/voucerdetail.css"/>
        </xpath>
    </template>

    <template id="website_frontend_layout" inherit_id="portal.frontend_layout">
        <xpath expr="//header" position="after">
            <t t-if="pageName == 'homepage'">
                <div class="container" style="margin-top: 60px;">
                    <t t-set="voucher_show"
                       t-value="request.env['res.config.settings'].sudo().search([],limit=1,order='id desc')"></t>
                    <t t-if="voucher_show.voucher_show_option == 'slider'">
                        <t t-value="request.env['gift.voucher.detail'].sudo().search([('voucher_image','!=',False)])"
                           t-set="img_list"/>
                        <t t-if="img_list">
                            <div id="mycar" class="carousel slide" data-ride="carousel">
                                <div class="carousel-inner">
                                    <div t-if="img_list[0].voucher_image" class="carousel-item active"
                                         itemprop="image">
                                        <img t-att-src="'data:image/png;base64,%s' % to_text(img_list[0].voucher_image)"
                                             style=" height:355px;width:100%;"/>
                                    </div>
                                    <t t-if="len(img_list)" t-foreach="img_list" t-as="pimg">
                                        <t t-if="pimg.id != img_list[0].id">
                                            <div t-if="pimg.voucher_image" class="carousel-item" itemprop="image">
                                                <img t-att-src="'data:image/png;base64,%s' % to_text(pimg.voucher_image)"
                                                     style=" height:355px;width:100%;"/>
                                            </div>
                                        </t>
                                    </t>
                                </div>
                                <a class="carousel-control-prev carousel-control left" style="background: rgba(0, 0, 0, 0.0);"
                                   href="#mycar" role="button" data-slide="prev">
                                    <span class="fa fa-chevron-left" aria-hidden="true"/>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a class="carousel-control-next carousel-control right" style="background: rgba(0, 0, 0, 0.0);"
                                   href="#mycar" role="button" data-slide="next">
                                    <span class="fa fa-chevron-right" aria-hidden="true"/>
                                    <span class="sr-only">Next</span>
                                </a>
                            </div>
                        </t>

                    </t>
                </div>
            </t>
        </xpath>
    </template>
    <template id="inherit_total" inherit_id="website_sale.total">
        <xpath expr="//tr[@id='order_total']" position="before">
            <t t-if="request.httprequest.path == '/shop/payment'">
                <tr t-if="website_sale_order.total_discount">
                    <td class="text-right">
                        <strong>Voucher Discount:</strong>
                    </td>
                    <td class="text-xl-right">
                        <span class="discount_count" t-field="website_sale_order.total_discount"
                              style="white-space: nowrap;"
                              t-options="{'widget': 'monetary', 'from_currency': website_sale_order.pricelist_id.currency_id, 'display_currency': website.currency_id}"/>
                        <span>
                            (
                            <span class="display_code" t-field="website_sale_order.sale_vouchercode.code"/>
                            )
                        </span>
                        <a style="cursor:pointer;font-size: 17px;">
                            <i id="btn_cancel_voucher_code"
                               class="fa fa-times" aria-hidden="false"/>
                        </a>
                    </td>
                </tr>
            </t>
            <t t-if="request.httprequest.path == 'shop/confirmation'">
                <tr t-if="website_sale_order.total_discount">
                    <td class="text-right-not-xs text-left-xs col-sm-2 col-xs-3 noborder">Voucher Discount:</td>
                    <td class="text-right col-sm-2 col-xs-3 noborder">
                        <span t-field="order.total_discount" style="white-space: nowrap;"
                              t-options="{'widget': 'monetary', 'from_currency': order.pricelist_id.currency_id, 'display_currency': website.currency_id}"/>
                        <input class="product_fetch" id="order_voucher" t-att-value="order"
                               type="hidden"/>
                    </td>
                </tr>
            </t>
        </xpath>
        <xpath expr="//div[@id='cart_total']" position="after">
            <div class="col-md-12" style="margin-bottom:10px;">
                <t t-if="request.env['res.config.settings'].sudo().search([],limit=1,order='id desc').gift_voucher and request.httprequest.path == '/shop/payment'">
                    <t t-if="request.httprequest.path == '/shop/payment'">
                        <h4>Voucher Code</h4>
                        <p>Have a voucher code? Fill this field and apply</p>
                        <div class="input-group">
                            <input type="text" id="code_no" name="code_no" placeholder="code..."
                                   class="form-control btn-clicked"/>
                            <input id="user_field" type="hidden" t-attf-value='#{request.session.uid}'/>
                            <div class="input-group-btn">
                                <button id="btn_apply_voucher_code" class="btn btn-default a-submit">Apply</button>
                            </div>
                        </div>
                        <t t-if="request.env['sale.order'].sudo().search([('id','=',website_sale_order.id)]).total_discount != 0.0  and request.httprequest.path == '/shop/payment'">
                            <div id="msg_success" class="alert-success submit-error-msg fa fa-check-circle">Voucher
                                applied Thank You
                            </div>
                        </t>
                    </t>
                </t>
            </div>
        </xpath>
    </template>
</odoo>